<!DOCTYPE html>
<html lang="en">

<head>
  <title>OMDb Movie Search</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="jumbotron">
    <h1>OMDb Movie Search</h1>
    <input id="searchTerm" type="text" />
    <label>Type</label>
    <select name="Type" id="searchType">
      <option value="All">All</option>
      <option value="Movie">Movie</option>
      <option value="Series">Series</option>
      <option value="Episode">Episode</option>
    </select>


    <button id="searchBtn" class="btn btn-primary">Search</button>
    <hr />

    <div id="results" class="alert alert-secondary">

    </div>
  </div>





  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>







  <script>

    $("#searchBtn").on("click", function() {
      var searchTerm = "&s=" + $("#searchTerm").val();
      var searchType = $("#searchType").val();
      switch (searchType) {
        case "All":
          searchType = "";
          break;
        case "Movie":
          searchType = "&type=movie";
          break;
        case "Series":
          searchType = "&type=series";
          break;
        case "Episode":
          searchType = "&type=episode";
          break;
        default:
          // code block
      }
      $("#results").empty(); // This will remove everything in the div

      var apiKey = "apikey=130d2b6b";

      $.getJSON("https://www.omdbapi.com/?"+apiKey + searchType + searchTerm, function(result) {

        for (result of result.Search) {

          var card = $("<div class='card' style='width: 20rem;'></div>");
          var image = $("<img class='card-img-top' src='...' alt='Card image cap'>");

          image.attr("src", result.Poster)
          card.append(image)

          var list = $("<ul class='list-group list-group-flush'></ul>");

          var title = result.Title;
          var listItem1 = $("<li id='movieTitle' class='list-group-item'>" +title + "</li>")

          var type = result.Type;
          var listItem2 = $("<li class='list-group-item'>" + type + "</li>")

          var year = result.Year;
          var listItem3 = $("<li class='list-group-item'>" + year + "</li>")

          list.append(listItem1);
          list.append(listItem2);
          list.append(listItem3);

          card.append(list);

          var linkBody = $("<div class='card-body'></div>");

          var cardID = result.imdbID;
          var link = $("<a href='#' class='card-link'>View on IMDb</a>");
            //alert(link);
          var finalLink = "https://www.imdb.com/title/"+ cardID +"/";
          console.log(finalLink);
          link.attr("href", finalLink );
          linkBody.append(link);
          card.append(linkBody);

          $("#results").append(card);
        }

      });
    });
  </script>


</body>

</html>

<!--
<div class="card-columns">
  <div class="card">
    <img src="..." class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Card title that wraps to a new line</h5>
      <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
    </div>
  </div>
  <div class="card p-3">
    <blockquote class="blockquote mb-0 card-body">
      <p>A well-known quote, contained in a blockquote element.</p>
      <footer class="blockquote-footer">
        <small class="text-muted">
          Someone famous in <cite title="Source Title">Source Title</cite>
        </small>
      </footer>
    </blockquote>
  </div>
  <div class="card">
    <img src="..." class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Card title</h5>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card bg-primary text-white text-center p-3">
    <blockquote class="blockquote mb-0">
      <p>A well-known quote, contained in a blockquote element.</p>
      <footer class="blockquote-footer text-white">
        <small>
          Someone famous in <cite title="Source Title">Source Title</cite>
        </small>
      </footer>
    </blockquote>
  </div>
  <div class="card text-center">
    <div class="card-body">
      <h5 class="card-title">Card title</h5>
      <p class="card-text">This card has a regular title and short paragraphy of text below it.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <img src="..." class="card-img" alt="...">
  </div>
  <div class="card p-3 text-right">
    <blockquote class="blockquote mb-0">
      <p>A well-known quote, contained in a blockquote element.</p>
      <footer class="blockquote-footer">
        <small class="text-muted">
          Someone famous in <cite title="Source Title">Source Title</cite>
        </small>
      </footer>
    </blockquote>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Card title</h5>
      <p class="card-text">This is another card with title and supporting text below. This card has some additional content to make it slightly taller overall.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
</div>



<div class="card" style="width: 20rem;">
  <img class="card-img-top" src="..." alt="Card image cap">
  <hr>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">Cras justo odio</li>
    <li class="list-group-item">Dapibus ac facilisis in</li>
    <li class="list-group-item">Vestibulum at eros</li>
  </ul>
  <div class="card-body">
    <a href="https://www.imdb.com/title/tt0076759/" class="card-link">Card link</a>
  </div>
</div>
-->
